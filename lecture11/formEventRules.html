<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0px;
            padding: 0px;
            font-family: sans-serif;
        }

        .formSection {
            display: grid;
            padding: 40px;
            grid-template-columns: 20% auto;
            gap: 30px;
        }

        .formSection form {
            padding: 15px;
            box-shadow: 0px 0px 10px 2px #ccc;
        }

        .formSection form button {
            width: 100%;
            border: none;
            background-color: red;
            color: antiquewhite;
            padding: 8px 0px;
        }

        .formSection form h3 {
            text-align: center;
            padding: 15px;
        }

        .inputOter {
            margin-bottom: 10px;
        }

        .inputOter label {
            display: block;
            font-size: 14px;
            ;
        }

        .inputOter input {
            width: 100%;
            height: 30px;
        }

        table {
            width: 100%;
            text-align: center;
            border-collapse: collapse;
        }

        th td {
            padding: 10px;
            text-align: center;
        }

        th {
            background-color: red;
            color: white;
        }

        button {
            padding: 5px 10px;
            border: none;
            background-color: yellow;
            color: black;
        }
        .error{
            font-size: 12px;
            margin-top: 5px;
           
            color: blueviolet;
            background: pink;
        }
    </style>
</head>

<body>
    <section class="formSection">
        <form action="">
            <h3>Enquire Now</h3>
            <div class="error"></div>
            <div class="inputOter">
                <label for="">Name</label>
                <input type="text" name="userName">
            </div>
            <div class="inputOter">
                <label for="">Email</label>
                <input type="email" name="userEmail">
            </div>
            <div class="inputOter">
                <label for="">Phone No</label>
                <input type="text" name="userPhone">
            </div>
            <button>Save</button>
        </form>
        <div>
            <table border="1" cellpadding="10px" cellspacing="0">
                <thead>
                    <tr>
                        <th>Sr.No</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone No</th>
                        <th>Action</th>

                    </tr>
                </thead>
                <tbody id="tableBody">
                    <tr>
                        <td>1</td>
                        <td>John Doe</td>
                        <td>john@example.com</td>
                        <td>1234567890</td>
                        <td><button>Edit</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </section>
</body>
<script>
    let formElement = document.querySelector(".formSection form")
    let userData = []

    let errorDiv=document.querySelector(".error")


    formElement.addEventListener('submit', (event) => {
        
        //  console.log(event.target); //form tag 
        let username = event.target.userName.value;  // form me fill ki gai value ayegi
        let useremail = event.target.userEmail.value; // email ayega
        let userphone = event.target.userPhone.value; // phone no ayega
       

        let userObj = {
            name: username,
            email: useremail,
            phone: userphone
        }
        

  let checkMyEmail=userData.find(item =>item.email==useremail)
  if(checkMyEmail){
    // alert("Email already exists")

     errorDiv.innerHTML="Email already exists......"
     setTimeout(()=>{
      errorDiv.innerHTML=" "
     },2000)
  } else {
    userData.push(userObj)
    storeDtainTable()
  }


   // agar values ko remove karna ho
        event.target.reset()

  event.preventDefault() // page  refresh stop

  
})

    // let body=document.querySelector("body")
    // body.addEventListener("contextmenu",(e)=>{ // right click nahi hoga
    //     e.preventDefault()
    // })

// store data in table
let tbodyElement=document.querySelector("#tableBody")
let storeDtainTable=()=>{
    let tableRow=""
  userData.forEach((item,index)=>{
    tableRow+=`<tr>
    <td>${index+1}</td>
    <td>${item.name}</td>
    <td>${item.email}</td>
    <td>${item.phone}</td>
    <td><button data-index="${index}">Edit</button></td>
</tr>`
 })
tbodyElement.innerHTML=tableRow


 

}
tbodyElement.addEventListener("click",(e)=>{
    if(e.target.tagName==="BUTTON"){
        if(!confirm("Are you sure to delete this item?")){ // confire ek alert box hai
            
        
            
        
        let userIndex=e.target.getAttribute("data-index")
        

        // remove item from array
        userData.splice(userIndex,1)
        storeDtainTable()
    }
}
})



</script>

</html>